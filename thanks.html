<html>
<head>
<title>Интернет-магазин</title>
<link rel="stylesheet" type="text/css" href="styles.css" />
	
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-96086852-1', 'auto');
  ga('send', 'pageview');

</script>
    
</head>

<body>



 
<div id="container">

    <div id="header">
    <p>Шапка сайта</p>
	<p><a href="/index.html">Главная</a></p>
    </div>
         
    <div id="menu_main">
   
		<table border="1" width="100%" height="100%">
			<tr >
			<th width="25%"><a href="/catalog.html">Каталог</a></th>
			<th width="25%"><a href="/cart.html">Корзина</a></th>
			<th width="25%"><a href="/cats.html">Котята</a></th>
			<th width="25%"><a href="/contacts.html">Контакты</a></th>
			</tr>
		</table>
 
    </div>
         
    <div id="menu_left">
		<ul>
			<li><a href="/index.html">Ссылка</a></li>
			<li><a href="/index.html">Ссылка</a></li>
			<li><a href="/gtm.html">GTM</a></li>
</ul>
    </div>
         
    <div id="content">
    <h1>Спасибо!</h1>
	<p>Номер заказа 222333</p>
	<ol>
	<li>
	Товар 1 --- 500 рублей --- 1 штуки
	</li>
	<li>
	Товар 2 --- 300 рублей --- 1 штука
	</li>
	</ol>
   </div>
   
 <script>
        ga('require', 'ec');


ga('ec:addProduct', {               // Provide product details in an productFieldObject.
  'id': '1',                   // Product ID (string).
  'name': 'Товар 1', 				// Product name (string).
  'price': '500',                 // Product price (currency).
});

ga('ec:addProduct', {               // Provide product details in an productFieldObject.
  'id': '2',                   // Product ID (string).
  'name': 'Товар 2', 				// Product name (string).
  'price': '300',                 // Product price (currency).
});

ga('ec:setAction', 'purchase', {          // Transaction details are provided in an actionFieldObject.
  'id': '222333',                         // (Required) Transaction id (string).
  'affiliation': 'Moscow', 				  // Affiliation (string).
  'revenue': '800',                     // Revenue (currency).
  
});

ga('send', 'event', 'eEC', 'purchase');
    </script>
  	
</div>
   <!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter43916189 = new Ya.Metrika({
                    id:43916189,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    webvisor:true,
                    trackHash:true,
                    ecommerce:"dataLayer"
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/43916189" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
<script>
ga(function(tracker) { //tracker - переменная, в которой лежит счетчик GA
  var clientId = tracker.get('clientId'); //достаем clientId из счетчика GA
  ga('send', 'event', 'system', 'clientid', { //отправляем событие в GA
  nonInteraction: true, 'dimension1': clientId
  });
  var yaParams = {'clientid': clientId}; //формируемся доп параметр для ЯМ
  if (typeof(yaCounter43916189)=="object"){ //проверяем, проинициализировалась (загрузилась) ли Метрика
  yaCounter43916189.userParams(yaParams); //добавляем внутренний параметр к Метрике, для того, чтобы Метрика при отправке своих событий отправляла этот (clientid) параметр
  yaCounter43916189.params(yaParams);//добавляем внутренний параметр к Метрике, для того, чтобы Метрика при отправке своих событий отправляла этот (clientid) параметр
  } else {
  setTimeout(function() {//ждем 2 сек, если метрика не была проинициализирована
    if (typeof(yaCounter43916189)=="object"){
    yaCounter43916189.userParams(yaParams);//добавляем внутренний параметр к Метрике, для того, чтобы Метрика при отправке своих событий отправляла этот (clientid) параметр
    yaCounter43916189.params(yaParams);//добавляем внутренний параметр к Метрике, для того, чтобы Метрика при отправке своих событий отправляла этот (clientid) параметр
    }
  }, 2000);
}
});
</script>        
</body>
</html>
